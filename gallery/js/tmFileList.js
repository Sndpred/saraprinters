(function($){$.fn.tmFileList=function(o){return this.each(function(){var $this=$(this),data=$this.data('tmFileList'),options={relativePath:'../../',pathThumb:'',pathFull:'',url:'./gallery/php/file_list.php',urlThumb:[],urlFull:[],constructor:function(){options.getData(options.pathThumb,options.setUrlThumb,output1);function output1(){options.getData(options.pathFull,options.setUrlFull,output2);}
function output2(){options.output(options.urlThumb,options.urlFull);}},setUrlThumb:function(inData){options.urlThumb=inData;},setUrlFull:function(inData){options.urlFull=inData;},getData:function(inData,callback,output){$.ajax({type:"POST",url:options.url,data:{path:options.relativePath+inData},success:function(results){results=results.split(';');results.length&&results.pop();$.each(results,function(i){results[i]=inData+results[i];});callback(results.sort());output&&output();}});},output:function(urlThumbList,urlFullList){}}
data?$this=data:$this.data({tmFileList:options});typeof o=='object'&&$.extend(options,o);options.me||options.constructor(options.me=$this);});}})(jQuery);